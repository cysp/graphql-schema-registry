// This file is auto-generated by the fastify-routes OpenAPI-TS plugin.
// Do not edit manually.

import fastifyPlugin from "fastify-plugin";
import type { FastifyPluginAsync, RouteShorthandOptions } from "fastify";
import type { RouteHandlers } from "./fastify.gen.ts";
import { zDeleteGraphData, zDeleteGraphResponse, zDeleteSubgraphData, zDeleteSubgraphResponse, zGetGraphData, zGetGraphResponse, zGetSubgraphData, zGetSubgraphResponse, zListGraphsResponse, zListSubgraphsData, zListSubgraphsResponse, zUpsertGraphData, zUpsertGraphResponse, zUpsertSubgraphData, zUpsertSubgraphResponse } from "./zod.gen.ts";

export const routePaths = {
  "listGraphs": "/v1/graphs",
  "deleteGraph": "/v1/graphs/:graphSlug",
  "getGraph": "/v1/graphs/:graphSlug",
  "upsertGraph": "/v1/graphs/:graphSlug",
  "listSubgraphs": "/v1/graphs/:graphSlug/subgraphs",
  "deleteSubgraph": "/v1/graphs/:graphSlug/subgraphs/:subgraphSlug",
  "getSubgraph": "/v1/graphs/:graphSlug/subgraphs/:subgraphSlug",
  "upsertSubgraph": "/v1/graphs/:graphSlug/subgraphs/:subgraphSlug",
} as const;

export const routeSchemas = {
  "listGraphs": {
    response: { 200: zListGraphsResponse },
  },
  "deleteGraph": {
    params: zDeleteGraphData.shape.path,
    response: { 204: zDeleteGraphResponse },
  },
  "getGraph": {
    params: zGetGraphData.shape.path,
    response: { 200: zGetGraphResponse },
  },
  "upsertGraph": {
    params: zUpsertGraphData.shape.path,
    headers: zUpsertGraphData.shape.headers,
    body: zUpsertGraphData.shape.body,
    response: { 200: zUpsertGraphResponse, 201: zUpsertGraphResponse },
  },
  "listSubgraphs": {
    params: zListSubgraphsData.shape.path,
    response: { 200: zListSubgraphsResponse },
  },
  "deleteSubgraph": {
    params: zDeleteSubgraphData.shape.path,
    response: { 204: zDeleteSubgraphResponse },
  },
  "getSubgraph": {
    params: zGetSubgraphData.shape.path,
    response: { 200: zGetSubgraphResponse },
  },
  "upsertSubgraph": {
    params: zUpsertSubgraphData.shape.path,
    headers: zUpsertSubgraphData.shape.headers,
    body: zUpsertSubgraphData.shape.body,
    response: { 200: zUpsertSubgraphResponse, 201: zUpsertSubgraphResponse },
  },
} as const;

export type FastifyRouteConfig = Pick<RouteShorthandOptions, "preHandler">;

export type FastifyRouteConfigByOperation = Partial<Record<keyof RouteHandlers, FastifyRouteConfig>>;

export type FastifyRoutesPluginOptions = {
  config?: FastifyRouteConfigByOperation | undefined;
  handlers: RouteHandlers;
};

const fastifyRoutesPluginImpl: FastifyPluginAsync<FastifyRoutesPluginOptions> = async (
  server,
  options,
): Promise<void> => {
  const handlers = options.handlers;
  const config = options.config ?? {};

  server.get(routePaths["listGraphs"], { ...config["listGraphs"], schema: routeSchemas["listGraphs"] }, handlers["listGraphs"]);
  server.delete(routePaths["deleteGraph"], { ...config["deleteGraph"], schema: routeSchemas["deleteGraph"] }, handlers["deleteGraph"]);
  server.get(routePaths["getGraph"], { ...config["getGraph"], schema: routeSchemas["getGraph"] }, handlers["getGraph"]);
  server.put(routePaths["upsertGraph"], { ...config["upsertGraph"], schema: routeSchemas["upsertGraph"] }, handlers["upsertGraph"]);
  server.get(routePaths["listSubgraphs"], { ...config["listSubgraphs"], schema: routeSchemas["listSubgraphs"] }, handlers["listSubgraphs"]);
  server.delete(routePaths["deleteSubgraph"], { ...config["deleteSubgraph"], schema: routeSchemas["deleteSubgraph"] }, handlers["deleteSubgraph"]);
  server.get(routePaths["getSubgraph"], { ...config["getSubgraph"], schema: routeSchemas["getSubgraph"] }, handlers["getSubgraph"]);
  server.put(routePaths["upsertSubgraph"], { ...config["upsertSubgraph"], schema: routeSchemas["upsertSubgraph"] }, handlers["upsertSubgraph"]);
};

export const fastifyRoutesPlugin = fastifyPlugin<FastifyRoutesPluginOptions>(
  fastifyRoutesPluginImpl,
  {
  name: "fastify-routes",
  },
);
